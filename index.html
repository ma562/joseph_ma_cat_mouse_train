<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat and Mouse Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header id="top-header">
        <div id="title-container">
            <h1>Cat and Mouse 2: Reinforcement Learning - a Project by Joseph Ma</h1>
        </div>
        <div class="header-item">
            <label for="speed-slider">Movement Speed</label>
            <input type="range" id="speed-slider" min="1" max="100" value="85">
            <span id="speed-value">85</span>
        </div>
        <div class="header-item">
            <label>Current Epsilon</label>
            <span id="epsilon-value">0.9</span>
        </div>
        <div class="header-item">
            <label>Current Training Episode</label>
            <span id="episode-value">0</span>
        </div>
        <div class="header-item">
            <label>Current Reward</label>
            <span id="rewards-value">0</span>
        </div>
        <div class="header-item">
            <label>Cumulative Episode Rewards</label>
            <span id="eRewards-value">0</span>
        </div>
        <div class="header-item">
            <label>Exploration / Exploitation</label>
            <div class="indicator-container">
                <div class="circle" id="exploration-circle"></div>
                <div class="circle" id="exploitation-circle"></div>
            </div>
        </div>
        <div class="header-item">
            <label>Prey Status</label>
            <div class="indicator-container">
                <div class="circle" id="escaped-circle"></div>
                <div class="circle" id="living-circle"></div>
                <div class="circle" id="dead-circle"></div>
            </div>
        </div>
        <div class="header-item">
            <label>Dead End Status</label>
            <div class="indicator-container">
                <div class="circle" id="end-status"></div>
            </div>
        </div>
        <div class="header-item">
            <label>Phase</label>
            <button id="phase-switch">Training</button>
        </div>
        <div class="header-item">
            <label>Show A* Shortest Path</label>
            <button id="dijkstra">Toggle</button>
        </div>
    </header>
    <canvas></canvas>

    <script>
    const canvas = document.querySelector('canvas')
    const c = canvas.getContext('2d')
    let the_dimension;
    function isMobile() {
      return window.innerWidth <= 768; // You can adjust this width based on your needs
    }

    // Set the dimension dynamically based on the device
    function setDimensions() {
      if (isMobile()) {
        // For mobile devices, adjust the dimension and shift the map lower
        the_dimension = 25; //Math.floor(window.innerWidth / myMap[0].length) - 2; // Make the blocks smaller based on map width
        const offsetY = Math.floor((canvas.height - mapHeight) / 2) + 50; // Shift map lower by 50px for buttons
      } else {
        // Default dimension for desktop
        the_dimension = 40;
        const offsetY = Math.floor((canvas.height - mapHeight) / 2); // No extra space for buttons
      }

      // Recalculate starting positions
      //startingX = offsetX + Boundary.width + Boundary.width / 2;
      //startingY = offsetY + Boundary.width + Boundary.width / 2;
      
      // Update the Boundary and other class dimensions as well
      // Boundary.width = the_dimension;
      // Boundary.height = the_dimension;
      // CatPath.width = the_dimension;
      // CatPath.height = the_dimension;
      // player.radius = the_dimension / 2 - 2;  // Adjust player size for mobile
      // player.my_velocity = the_dimension; // Adjust velocity accordingly
    }

    // Call this function initially and whenever the window resizes
    setDimensions();
    window.addEventListener('resize', setDimensions);

    // Update canvas dimensions
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // Update offset positions to shift map
    //const offsetX = Math.floor((canvas.width - mapWidth) / 2);
    //let offsetY = Math.floor((canvas.height - mapHeight) / 2);

    </script>
<script src="index.js"></script>
</body>
</html>